<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>‡∏ó‡∏≤‡∏¢‡∏ú‡∏•‡∏ö‡∏≠‡∏• | ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≤‡∏¢</title>
<meta name="color-scheme" content="dark"/>
<style>
:root{
  --bg0:#060102; --bg1:#0b0304;
  --line:rgba(255,90,90,.22);
  --line2:rgba(255,90,90,.32);
  --txt:#fff1f1;
  --muted:rgba(255,210,210,.75);
  --muted2:rgba(255,210,210,.55);
  --accent:#ff2b2b; --accent2:#b80000;
  --ok:#36d399; --bad:#ff5a5f; --warn:#ffcc66;
  --shadow:0 22px 70px rgba(0,0,0,.65);
  --shadow2:0 12px 40px rgba(0,0,0,.45);
  --r14:14px; --r16:16px; --r20:20px;
}
*{box-sizing:border-box}
body{
  margin:0;padding:18px 14px 30px;
  font-family:system-ui,-apple-system,"Segoe UI",Tahoma,sans-serif;
  color:var(--txt);
  background:
    radial-gradient(1000px 600px at 15% 10%, rgba(255,0,0,.20), transparent 60%),
    radial-gradient(900px 540px at 85% 18%, rgba(255,0,0,.12), transparent 60%),
    radial-gradient(900px 600px at 50% 120%, rgba(255,0,0,.10), transparent 55%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  overflow-x:hidden;
}
.wrap{width:min(980px,100%);margin:0 auto}
.topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
.brand{display:flex;align-items:center;gap:12px}
.brand .logo{width:44px;height:44px;border-radius:14px;background:rgba(255,255,255,.06);border:1px solid var(--line2);display:grid;place-items:center;overflow:hidden;box-shadow:var(--shadow2)}
.brand .logo img{width:100%;height:100%;object-fit:cover}
.brand .t b{font-size:14px}
.brand .t span{display:block;font-size:12px;color:var(--muted2)}
.chip{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:999px;border:1px solid var(--line2);background:rgba(0,0,0,.18);box-shadow:var(--shadow2);font-size:12px;color:var(--muted);user-select:none;white-space:nowrap}
.dot{width:8px;height:8px;border-radius:99px;background:var(--ok);box-shadow:0 0 18px rgba(54,211,153,.65)}
.dot.warn{background:var(--warn);box-shadow:0 0 18px rgba(255,204,102,.6)}
.dot.bad{background:var(--bad);box-shadow:0 0 18px rgba(255,90,90,.6)}
.card{border-radius:var(--r20);background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));border:1px solid var(--line);box-shadow:var(--shadow);overflow:hidden;backdrop-filter:blur(10px)}
.head{padding:18px;border-bottom:1px solid var(--line);background:radial-gradient(700px 260px at 50% 0%, rgba(255,43,43,.22), transparent 65%),linear-gradient(180deg, rgba(0,0,0,.22), transparent);text-align:center}
.heroLogo{display:flex;justify-content:center;margin-bottom:12px}
.heroLogo .pill{padding:12px 16px;border-radius:999px;border:1px solid rgba(255,90,90,.28);background:rgba(0,0,0,.18);box-shadow:0 14px 40px rgba(0,0,0,.45)}
.heroLogo img{width:170px;max-width:78vw;height:auto;display:block;filter:drop-shadow(0 0 18px rgba(255,0,0,.45))}
.title{margin:0;font-weight:1000;font-size:26px}
.sub{margin-top:8px;font-size:13px;color:var(--muted);line-height:1.55}
.matchBar{margin-top:14px;border-radius:var(--r16);border:1px solid rgba(255,90,90,.24);background:rgba(0,0,0,.22);padding:14px}
.teams{display:grid;grid-template-columns:1fr auto 1fr;gap:14px;align-items:center}
.badge{width:96px;height:96px;border-radius:20px;margin:0 auto;background:rgba(255,255,255,.05);border:1px solid rgba(255,90,90,.28);box-shadow:0 14px 40px rgba(0,0,0,.45);display:grid;place-items:center;aspect-ratio:1/1;overflow:hidden}
.badge img{width:100%;height:100%;object-fit:contain;object-position:center;max-width:72%;max-height:72%;display:block;transform:translateY(2px)}
.teamName{margin-top:8px;font-size:12px;text-align:center;color:rgba(255,235,235,.92)}
.vs{font-weight:1100;letter-spacing:2px;font-size:18px;color:rgba(255,200,200,.88);user-select:none}
.body{padding:18px}
.row{margin-bottom:14px}
.label{display:flex;align-items:center;justify-content:space-between;gap:10px;color:var(--muted);font-size:13px;margin-bottom:8px}
.mini{font-size:11px;color:rgba(255,210,210,.55)}
.input{width:100%;padding:13px;border-radius:var(--r14);border:1px solid rgba(255,90,90,.22);background:rgba(0,0,0,.24);color:var(--txt);outline:none;font-size:14px;transition:.2s ease}
.input:focus{border-color:rgba(255,43,43,.85);box-shadow:0 0 0 4px rgba(255,43,43,.22)}
.btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.btn{cursor:pointer;border:none;border-radius:var(--r14);padding:12px 14px;font-weight:950;font-size:14px;transition:.18s ease;user-select:none}
.btn:active{transform:translateY(1px) scale(.99)}
.btn[disabled]{opacity:.55;cursor:not-allowed;transform:none}
.btnGhost{background:rgba(255,255,255,.06);color:var(--txt);border:1px solid rgba(255,90,90,.18)}
.btnPrimary{flex:1;min-width:240px;color:#fff;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 18px 40px rgba(255,43,43,.15)}
.scoreBox{display:grid;grid-template-columns:1fr auto 1fr;gap:10px;align-items:center;padding:12px;border-radius:var(--r16);border:1px dashed rgba(255,90,90,.35);background:rgba(0,0,0,.22)}
.scoreCtrl{display:flex;align-items:center;gap:8px;justify-content:center}
.scoreInput{width:66px;text-align:center;font-size:22px;font-weight:1000;padding:10px 0;border-radius:var(--r14);border:1px solid rgba(255,90,90,.35);background:rgba(0,0,0,.35);color:#fff}
.scBtn{width:44px;height:44px;border-radius:var(--r14);border:1px solid rgba(255,90,90,.22);background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;font-size:22px;font-weight:1000;cursor:pointer;box-shadow:0 8px 20px rgba(255,0,0,.35)}
.scBtn:active{transform:scale(.95)}
.scBtn[disabled]{opacity:.55;cursor:not-allowed;transform:none}
.choiceGrid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:12px;border-radius:var(--r16);border:1px dashed rgba(255,90,90,.35);background:rgba(0,0,0,.22)}
.choice3{grid-template-columns:1fr 1fr 1fr}
.choiceBtn{border:1px solid rgba(255,90,90,.22);background:rgba(255,255,255,.06);color:var(--txt);padding:12px 10px;border-radius:var(--r14);cursor:pointer;font-weight:900;font-size:13px;display:flex;align-items:center;justify-content:center;gap:8px;transition:.15s ease}
.choiceBtn.active{border-color:rgba(54,211,153,.55);box-shadow:0 0 0 4px rgba(54,211,153,.14);background:rgba(54,211,153,.10)}
.alert{margin-top:12px;padding:12px;border-radius:var(--r16);border:1px solid rgba(255,90,90,.18);background:rgba(0,0,0,.18);font-size:13px;line-height:1.55}
.ok{border-color:rgba(54,211,153,.28);background:rgba(54,211,153,.10)}
.err{border-color:rgba(255,90,90,.30);background:rgba(255,90,90,.10)}
.warn{border-color:rgba(255,204,102,.35);background:rgba(255,204,102,.12)}
.spin{width:16px;height:16px;border-radius:99px;border:2px solid rgba(255,255,255,.25);border-top-color: rgba(255,255,255,.95);display:inline-block;animation:rot .7s linear infinite;vertical-align:-3px;margin-right:8px}
@keyframes rot{to{transform:rotate(360deg)}}
</style>
</head>

<body>
<div class="wrap">
  <div class="topbar">
    <div class="brand">
      <div class="logo"><img src="https://ramruay365.co/wp-content/uploads/2025/12/1735020594-1.png" alt="RR365"></div>
      <div class="t"><b>Rumruay365</b><span>‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≤‡∏¢ ‚Ä¢ ‡∏™‡πà‡∏á‡∏•‡∏á‡∏ä‡∏µ‡∏ó</span></div>
    </div>
    <div class="chip"><span id="dot" class="dot warn"></span><span id="rrStatus">‡∏£‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</span></div>
  </div>

  <section class="card">
    <div class="head">
      <div class="heroLogo"><div class="pill"><img src="https://ramruay365.co/wp-content/uploads/2025/12/1735020594-1.png" alt="‡∏£‡πà‡∏≥‡∏£‡∏ß‡∏¢365"></div></div>
      <h2 class="title">‡∏ó‡∏≤‡∏¢‡∏ú‡∏•‡∏ö‡∏≠‡∏• (‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡πà‡∏≠‡∏ô)</h2>
      <div class="sub">
        ‡πÉ‡∏™‡πà‡πÄ‡∏ö‡∏≠‡∏£‡πå ‚Üí ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‚Üí ‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏ó‡∏≤‡∏¢ ‚Üí ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏•‡∏á‡∏ä‡∏µ‡∏ó<br>
        * ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà: ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏•‡∏ö‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ä‡∏µ‡∏ó Predictions ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏´‡∏°‡πà
      </div>

      <div class="matchBar">
        <div class="teams">
          <div>
            <div class="badge"><img id="homeLogo" alt="‡∏ó‡∏µ‡∏°‡πÄ‡∏´‡∏¢‡πâ‡∏≤"></div>
            <div class="teamName" id="homeName">‡∏™‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏™</div>
          </div>
          <div class="vs">VS</div>
          <div>
            <div class="badge"><img id="awayLogo" alt="‡∏ó‡∏µ‡∏°‡πÄ‡∏¢‡∏∑‡∏≠‡∏ô"></div>
            <div class="teamName" id="awayName">‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏û‡∏π‡∏•</div>
          </div>
        </div>
      </div>
    </div>

    <div class="body">
      <form id="f" autocomplete="off">
        <div class="row">
          <div class="label"><span>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£</span><span class="mini">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á: <b id="devMini">‚Äî</b></span></div>
          <input class="input" id="phone" type="tel" inputmode="numeric" autocomplete="tel" placeholder="‡πÄ‡∏ä‡πà‡∏ô 096xxxxxxx" maxlength="12" required>

          <div class="btns">
            <button type="button" class="btn btnGhost" id="btnCheck">‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</button>
            <button type="reset" class="btn btnGhost" id="btnClear">‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤</button>
          </div>
        </div>

        <div class="row">
          <div class="label"><span>‡∏ó‡∏µ‡∏°‡πÑ‡∏´‡∏ô‡πÄ‡∏Ç‡∏µ‡πà‡∏¢‡∏Å‡πà‡∏≠‡∏ô</span><span class="mini">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏ó‡∏µ‡∏°</span></div>
          <div class="choiceGrid" id="kickGrid">
            <button type="button" class="choiceBtn" data-kick="HOME" id="kickHome">üèÅ <span id="kickHomeTxt">‡∏™‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏™</span></button>
            <button type="button" class="choiceBtn" data-kick="AWAY" id="kickAway">üèÅ <span id="kickAwayTxt">‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏û‡∏π‡∏•</span></button>
          </div>
        </div>

        <div class="row">
          <div class="label"><span>‡∏ó‡∏µ‡∏°‡πÑ‡∏´‡∏ô‡∏¢‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô</span><span class="mini">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span></div>
          <div class="choiceGrid choice3" id="firstGrid">
            <button type="button" class="choiceBtn" data-first="HOME" id="firstHome">‚öΩ <span id="firstHomeTxt">‡∏™‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏™</span></button>
            <button type="button" class="choiceBtn" data-first="AWAY" id="firstAway">‚öΩ <span id="firstAwayTxt">‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏û‡∏π‡∏•</span></button>
            <button type="button" class="choiceBtn" data-first="NONE" id="firstNone">üö´ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ï‡∏π</button>
          </div>
        </div>

        <div class="row">
          <div class="label"><span>‡∏ó‡∏≤‡∏¢‡∏™‡∏Å‡∏≠‡∏£‡πå (‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç)</span><span class="mini">‡∏™‡πà‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡πà‡∏≤‡∏ô</span></div>
          <div class="scoreBox">
            <div class="scoreCtrl">
              <button type="button" class="scBtn" id="hsMinus">‚àí</button>
              <input class="scoreInput" id="hs" type="number" value="0" min="0" max="99" readonly>
              <button type="button" class="scBtn" id="hsPlus">+</button>
            </div>
            <div class="vs" style="font-size:16px">VS</div>
            <div class="scoreCtrl">
              <button type="button" class="scBtn" id="asMinus">‚àí</button>
              <input class="scoreInput" id="as" type="number" value="0" min="0" max="99" readonly>
              <button type="button" class="scBtn" id="asPlus">+</button>
            </div>
          </div>

          <div class="btns">
            <button class="btn btnPrimary" id="btnSubmit" type="submit" disabled>‚õî ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡πà‡∏≠‡∏ô</button>
          </div>
        </div>

        <div id="msg"></div>
      </form>
    </div>
  </section>
</div>

<script>
/* ================== CONFIG ================== */
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbw_yfMkWpe2pg24rdmgmwu8DAkkpJKz7veiyQFANFuGvmgw7By_PI2NtXLu7VeiHfmHxQ/exec"; // /exec
const HOME_NAME = "‡∏™‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏™";
const AWAY_NAME = "‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏û‡∏π‡∏•";
const HOME_LOGO = "https://media.api-sports.io/football/teams/47.png";
const AWAY_LOGO = "https://media.api-sports.io/football/teams/40.png";
/* =========================================== */

const $ = (id)=>document.getElementById(id);

function setTop(type, text){
  $("rrStatus").textContent = text;
  $("dot").className = "dot" + (type==="ok" ? "" : type==="bad" ? " bad" : " warn");
}
function showMsg(type, text){
  const cls = type==="ok" ? "alert ok" : type==="warn" ? "alert warn" : "alert err";
  $("msg").innerHTML = `<div class="${cls}">${text}</div>`;
}
function onlyDigits(s){ return String(s||"").replace(/[^\d]/g,""); }
function isValidPhone(d){ return /^0\d{8,9}$/.test(d); }

function getDeviceId(){
  const key="RR365_DEVICE_ID";
  let v=localStorage.getItem(key);
  if(!v){
    v=(crypto && crypto.randomUUID) ? crypto.randomUUID()
      : ("dev_"+Math.random().toString(16).slice(2)+Date.now());
    localStorage.setItem(key,v);
  }
  return v;
}
const deviceId = getDeviceId();
$("devMini").textContent = deviceId.slice(0,8)+"‚Ä¶";

const LS_OK = "RR365_CHECK_OK_" + deviceId;
const LS_KICK = "RR365_KICK_" + deviceId;
const LS_FIRST= "RR365_FIRST_" + deviceId;

function setLoading(btn, on, text){
  if(on){
    btn.dataset.prev = btn.textContent;
    btn.disabled = true;
    btn.innerHTML = `<span class="spin"></span>${text || "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£..."}`;
  }else{
    btn.disabled = false;
    btn.textContent = btn.dataset.prev || btn.textContent;
  }
}

async function post(body){
  const res = await fetch(WEB_APP_URL, {
    method:"POST",
    headers: {"Content-Type":"text/plain;charset=utf-8"},
    body: JSON.stringify(body)
  });
  const t = await res.text();
  return JSON.parse(t);
}

function setChoiceActive(groupEl, key, value){
  [...groupEl.querySelectorAll(".choiceBtn")].forEach(b=>{
    const v = b.dataset[key];
    b.classList.toggle("active", v === value);
  });
}
function setKick(v){ localStorage.setItem(LS_KICK, v); setChoiceActive($("kickGrid"), "kick", v); }
function setFirst(v){ localStorage.setItem(LS_FIRST, v); setChoiceActive($("firstGrid"), "first", v); }
function getKick(){ return localStorage.getItem(LS_KICK) || ""; }
function getFirst(){ return localStorage.getItem(LS_FIRST) || ""; }

function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }
function changeScore(id, step){
  const el=$(id);
  let v=parseInt(el.value||"0",10);
  if(Number.isNaN(v)) v=0;
  el.value=String(clamp(v+step, 0, 99));
}
$("hsMinus").addEventListener("click", ()=>changeScore("hs",-1));
$("hsPlus").addEventListener("click",  ()=>changeScore("hs", 1));
$("asMinus").addEventListener("click", ()=>changeScore("as",-1));
$("asPlus").addEventListener("click",  ()=>changeScore("as", 1));

$("kickGrid").addEventListener("click", (e)=>{
  const b = e.target.closest(".choiceBtn"); if(!b) return;
  setKick(b.dataset.kick);
  refreshSubmit();
});
$("firstGrid").addEventListener("click", (e)=>{
  const b = e.target.closest(".choiceBtn"); if(!b) return;
  setFirst(b.dataset.first);
  refreshSubmit();
});

function refreshSubmit(){
  const ok = localStorage.getItem(LS_OK)==="1";
  const kickOk = (getKick()==="HOME" || getKick()==="AWAY");
  const firstOk = (getFirst()==="HOME" || getFirst()==="AWAY" || getFirst()==="NONE");
  $("btnSubmit").disabled = !(ok && kickOk && firstOk);
  $("btnSubmit").textContent = ok ? ( (kickOk && firstOk) ? "‚úÖ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ó‡∏≤‡∏¢" : "‚ö†Ô∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ç‡∏µ‡πà‡∏¢‡∏Å‡πà‡∏≠‡∏ô/‡∏¢‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö" ) : "‚õî ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡πà‡∏≠‡∏ô";
}

function getPhone(){
  const d = onlyDigits($("phone").value);
  $("phone").value = d.slice(0,10);
  return $("phone").value;
}

/* init */
$("homeName").textContent = HOME_NAME;
$("awayName").textContent = AWAY_NAME;
$("kickHomeTxt").textContent = HOME_NAME;
$("kickAwayTxt").textContent = AWAY_NAME;
$("firstHomeTxt").textContent = HOME_NAME;
$("firstAwayTxt").textContent = AWAY_NAME;

$("homeLogo").src = HOME_LOGO;
$("awayLogo").src = AWAY_LOGO;
$("homeLogo").onerror=function(){this.onerror=null; this.src="https://ramruay365.co/wp-content/uploads/2025/12/1735020594-1.png";}
$("awayLogo").onerror=function(){this.onerror=null; this.src="https://ramruay365.co/wp-content/uploads/2025/12/1735020594-1.png";}

setTop("warn","‡∏£‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå");
refreshSubmit();

/* check eligibility */
$("btnCheck").addEventListener("click", async ()=>{
  const phone = getPhone();
  if(!isValidPhone(phone)) return showMsg("err","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÄ‡∏ä‡πà‡∏ô 096xxxxxxx)");
  if(!WEB_APP_URL || WEB_APP_URL.includes("‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå")) return showMsg("err","‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏™‡πà WEB_APP_URL");

  setLoading($("btnCheck"), true, "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå...");
  try{
    const data = await post({ action:"check", phone, deviceId, userAgent:navigator.userAgent });

    if(data.ok){
      localStorage.setItem(LS_OK, "1");
      showMsg("ok", data.msg || "‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
      setTop("ok","‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡πâ‡∏ß");
    }else{
      localStorage.setItem(LS_OK, "0");
      showMsg("warn", data.msg || "‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå");
      setTop("warn","‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô/‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß");
    }
    refreshSubmit();
  }catch(e){
    showMsg("err","‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Web App / Deploy / ‡πÄ‡∏ô‡πá‡∏ï");
    setTop("bad","‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
    localStorage.setItem(LS_OK, "0");
    refreshSubmit();
  }finally{
    setLoading($("btnCheck"), false);
    $("btnCheck").textContent="‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå";
  }
});

/* submit */
$("f").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const phone = getPhone();
  if(!isValidPhone(phone)) return showMsg("err","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
  if(localStorage.getItem(LS_OK)!=="1") return showMsg("warn","‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô");
  const kick = getKick();
  const first = getFirst();
  if(!(kick==="HOME"||kick==="AWAY")) return showMsg("warn","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡∏°‡πÄ‡∏Ç‡∏µ‡πà‡∏¢‡∏Å‡πà‡∏≠‡∏ô");
  if(!(first==="HOME"||first==="AWAY"||first==="NONE")) return showMsg("warn","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡∏°‡∏¢‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô");

  setLoading($("btnSubmit"), true, "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ó‡∏≤‡∏¢...");
  try{
    const data = await post({
      action:"submit",
      phone,
      deviceId,
      kickOffTeam: kick,
      firstGoalTeam: first,
      homeScore: $("hs").value,
      awayScore: $("as").value,
      userAgent: navigator.userAgent
    });

    if(data.ok){
      showMsg("ok", data.msg || "‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ");
      setTop("ok","‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß");
      // ‚úÖ ‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏á ‡πÉ‡∏´‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏•‡∏ö‡πÉ‡∏ô‡∏ä‡∏µ‡∏ó (‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏Å‡∏î‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÄ‡∏à‡∏≠ ‚Äú‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß‚Äù)
      localStorage.setItem(LS_OK, "0");
    }else{
      showMsg("warn", data.msg || "‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
      setTop("warn","‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
    }
    refreshSubmit();
  }catch(e){
    showMsg("err","‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Web App / Deploy / ‡πÄ‡∏ô‡πá‡∏ï");
    setTop("bad","‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
    refreshSubmit();
  }finally{
    setLoading($("btnSubmit"), false);
    refreshSubmit();
  }
});

/* clear */
$("btnClear").addEventListener("click", ()=>{
  $("msg").innerHTML="";
  setTop("warn","‡∏£‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå");
  // ‡πÑ‡∏°‡πà‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ß‡πâ‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏•‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î 2 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ
  // localStorage.removeItem(LS_KICK); localStorage.removeItem(LS_FIRST);
  // localStorage.removeItem(LS_OK);
  refreshSubmit();
});
</script>
</body>
</html>
