<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ทายผลบอล | Rumruay365</title>
<style>
body{font-family:sans-serif;background:#0b0b0b;color:#fff;padding:20px}
button{padding:10px 14px;font-weight:bold}
.choice.active{background:#36d399;color:#000}
</style>
</head>
<body>

<h2>⚽ ทายผลบอล (แอดมินอนุมัติภายหลัง)</h2>

<input id="phone" placeholder="เบอร์โทร"><br><br>

<button onclick="check()">เช็คสิทธิ์</button>
<div id="status"></div>

<hr>

<h3>ทีมเขี่ยก่อน</h3>
<button class="choice" onclick="pickKick('HOME')">HOME</button>
<button class="choice" onclick="pickKick('AWAY')">AWAY</button>

<h3>ทีมยิงก่อน</h3>
<button class="choice" onclick="pickFirst('HOME')">HOME</button>
<button class="choice" onclick="pickFirst('AWAY')">AWAY</button>
<button class="choice" onclick="pickFirst('NONE')">ไม่มี</button>

<h3>สกอร์</h3>
<input id="hs" type="number" value="0"> :
<input id="as" type="number" value="0"><br><br>

<button onclick="submit()">ส่งคำทาย</button>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwTaOHSv5PgzBiWcwdNLexU9gitMaf5b6SAwRqyS7tPm56ONJuwrBD4BjsfuNZeBGAR/exec";
const deviceId = localStorage.deviceId || (localStorage.deviceId=crypto.randomUUID());
let kick="", first="";

function post(d){
  return fetch(WEB_APP_URL,{
    method:"POST",
    body:JSON.stringify(d)
  }).then(r=>r.json());
}

function check(){
  post({action:"check",phone:phone.value,deviceId,userAgent:navigator.userAgent})
    .then(r=>status.innerText=r.msg);
}

function pickKick(v){kick=v;highlight()}
function pickFirst(v){first=v;highlight()}
function highlight(){
  document.querySelectorAll(".choice").forEach(b=>b.classList.remove("active"));
}

function submit(){
  post({
    action:"submit",
    phone:phone.value,
    deviceId,
    kickOffTeam:kick,
    firstGoalTeam:first,
    homeScore:hs.value,
    awayScore:as.value,
    userAgent:navigator.userAgent
  }).then(r=>status.innerText=r.msg);
}
</script>
</body>
</html>
